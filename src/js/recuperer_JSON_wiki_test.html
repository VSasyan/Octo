<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8" />
    <title>Tests unitaires associés à la récupération d'informations JSON sur wikipedia</title>

    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="recuperer_JSON_wiki.js"></script>
</head>

<style type="text/css">
.titres {
	width: 75%;
	margin-left:50px;
}
.test {
	margin:auto;
	margin-top: 50px;
	border: 1px solid #000;
	width: 90%;
	padding: 25px;
}
.test>div {
	margin-top: 0;
	margin-left:50px;
	margin-right: 50px;
	border: 1px solid #000;
	padding: 25px;
	overflow: auto;
}
div.test div.resultat {
	border: 1px solid #00F;
}
div.test div.resultat_attendu {
	border: 1px solid #F00;
}
span.oui {
	color:green;
	font-weight: bold;
	display: none;
}
span.non {
	color:red;
	font-weight: bold;
	display: none;
}
</style>

<script type="text/javascript">
	window.onload = function () {
		$('.test').each(function() {
			var table = JSON.parse($(this).find('.titres').val());
			$(this).find('.resultat').append(recuperer_JSON_wiki(table, 1, 1));
			if ($(this).find('.resultat').html() == $(this).find('.resultat_attendu').html()) {
				$(this).find('.oui').show();
				$(this).find('.non').hide();
			} else {				
				$(this).find('.non').show();
				$(this).find('.oui').hide();
			}
		});
	}
</script>

<body>

<div class="test">
	<p>Test 1 : contenu du tableau "titre" en JSON</p>
	<p><input class="titres" value='["Bataille de Verdun (1916)"]' type="text"/></p>
	<p>Résultat :</p>
	<div class="resultat"></div>
	<p>Résultat attendu :</p>
	<div class="resultat_attendu">[{"id":49111,"titre":"Bataille de Verdun (1916)","long":5.38842,"lat":49.1608,"nb_langue":0,"nb_visite":0,"longueur":65823,"lien":"http://fr.wikipedia.org/wiki/Bataille_de_Verdun_(1916)","debut_annee":"1916","debut_mois":"février","debut_jour":"21","fin_annee":"1916","fin_mois":"décembre","fin_jour":"9","importance":0,"distance_Portail":2,"portail_id":1}]</div>
	<p>Test unitaire validé ? <span class="oui">Oui !</span><span class="non">Non !</span></p>
</div>

<div class="test">
	<p>Test 1 : contenu du tableau "titre" en JSON</p>
	<p><input class="titres" value='["Bataille de Verdun (1916)","Bataille_de_Corbione","Bataille_de_la_Porte_Colline","Bataille_de_Dyrrachium_(48_av._J.-C.)","Siège_d%27Alésia","Bataille_de_Ctésiphon_(363)"]' type="text"/></p>
	<p>Résultat :</p>
	<div class="resultat"></div>
	<p>Résultat attendu :</p>
	<div class="resultat_attendu">[{"id":8449414,"titre":"Bataille de Corbione","long":0,"lat":0,"nb_langue":0,"nb_visite":0,"longueur":8022,"lien":"http://fr.wikipedia.org/wiki/Bataille_de_Corbione","debut_annee":"-446","debut_mois":0,"debut_jour":0,"fin_annee":"-446","fin_mois":0,"fin_jour":0,"importance":0,"distance_Portail":2,"portail_id":1},{"id":3019915,"titre":"Bataille de Ctésiphon (363)","long":44.5833,"lat":33.1,"nb_langue":0,"nb_visite":0,"longueur":5801,"lien":"http://fr.wikipedia.org/wiki/Bataille_de_Ct%C3%A9siphon_(363)","debut_annee":"363","debut_mois":0,"debut_jour":0,"fin_annee":"363","fin_mois":0,"fin_jour":0,"importance":0,"distance_Portail":2,"portail_id":1},{"id":732581,"titre":"Bataille de Dyrrachium (48 av. J.-C.)","long":0,"lat":0,"nb_langue":0,"nb_visite":0,"longueur":4209,"lien":"http://fr.wikipedia.org/wiki/Bataille_de_Dyrrachium_(48_av._J.-C.)","debut_annee":"-48","debut_mois":"juillet","debut_jour":"10","fin_annee":"-48","fin_mois":"juillet","fin_jour":"10","importance":0,"distance_Portail":2,"portail_id":1},{"id":49111,"titre":"Bataille de Verdun (1916)","long":5.38842,"lat":49.1608,"nb_langue":0,"nb_visite":0,"longueur":65823,"lien":"http://fr.wikipedia.org/wiki/Bataille_de_Verdun_(1916)","debut_annee":"1916","debut_mois":"février","debut_jour":"21","fin_annee":"1916","fin_mois":"décembre","fin_jour":"9","importance":0,"distance_Portail":2,"portail_id":1},{"id":2895689,"titre":"Bataille de la Porte Colline","long":0,"lat":0,"nb_langue":0,"nb_visite":0,"longueur":3098,"lien":"http://fr.wikipedia.org/wiki/Bataille_de_la_Porte_Colline","debut_annee":"-82","debut_mois":"Novembre","debut_jour":0,"fin_annee":"-82","fin_mois":"Novembre","fin_jour":0,"importance":0,"distance_Portail":2,"portail_id":1},{"id":56637,"titre":"Siège d'Alésia","long":4.50028,"lat":47.5372,"nb_langue":0,"nb_visite":0,"longueur":82408,"lien":"http://fr.wikipedia.org/wiki/Si%C3%A8ge_d%27Al%C3%A9sia","debut_annee":-52,"debut_mois":0,"debut_jour":0,"fin_annee":-52,"fin_mois":0,"fin_jour":0,"importance":0,"distance_Portail":2,"portail_id":1}]</div>
	<p>Test unitaire validé ? <span class="oui">Oui !</span><span class="non">Non !</span></p>
</div>

</body>
</html>